{"version":3,"sources":["../src/validate.js"],"names":["schema","joi","object","keys","name","string","min","required","path","type","buildOptions","serverOnly","bool","debug","buildLocation","mobileSettings","server","uri","allowIncompatibleUpdates","boolean","executable","docker","env","auth","id","secret","sslDomains","array","items","forceSSL","region","minInstances","number","maxInstances","instanceType","gracefulShutdown","longEnvVars","yumPackages","pattern","allow","oldVersions","customBeanstalkConfig","namespace","trim","option","value","config","utils","details","combineErrorDetails","validate","app","VALIDATE_OPTIONS","length","push","message","addLocation"],"mappings":"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","sourcesContent":["import joi from 'joi';\n\nconst schema = joi.object().keys({\n  name: joi.string().min(1).required(),\n  path: joi.string().min(1).required(),\n  type: joi.string().required(),\n  buildOptions: joi.object().keys({\n    serverOnly: joi.bool(),\n    debug: joi.bool(),\n    buildLocation: joi.string(),\n    mobileSettings: joi.object(),\n    server: joi.string().uri(),\n    allowIncompatibleUpdates: joi.boolean(),\n    executable: joi.string()\n  }),\n  // The meteor plugin adds the docker object, which is a bug in mup\n  docker: joi.object(),\n  env: joi.object(),\n  auth: joi.object().keys({\n    id: joi.string().required(),\n    secret: joi.string().required()\n  }).required(),\n  sslDomains: joi.array().items(joi.string()),\n  forceSSL: joi.bool(),\n  region: joi.string(),\n  minInstances: joi.number().min(1).required(),\n  maxInstances: joi.number().min(1),\n  instanceType: joi.string(),\n  gracefulShutdown: joi.bool(),\n  longEnvVars: joi.bool(),\n  yumPackages: joi.object().pattern(\n    /[/s/S]*/,\n    [joi.string().allow('')]\n  ),\n  oldVersions: joi.number(),\n  customBeanstalkConfig: joi.array().items(joi.object({\n    namespace: joi.string().trim().required(),\n    option: joi.string().trim().required(),\n    value: joi.string().trim().required()\n  }))\n});\n\nexport default function (config, utils) {\n  let details = [];\n  details = utils.combineErrorDetails(\n    details,\n    joi.validate(config.app, schema, utils.VALIDATE_OPTIONS)\n  );\n  if (config.app && config.app.name && config.app.name.length < 4) {\n    details.push({\n      message: 'must have at least 4 characters',\n      path: 'name'\n    });\n  }\n\n  return utils.addLocation(details, 'app');\n}\n"],"file":"validate.js"}